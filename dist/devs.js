"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = require("./config");
const firebase = require("firebase/app");
require("firebase/database");
function offBOT(author, channel) {
    if (author.roles.has('517168972483919929') && channel.id === '611502712571559950') {
        const auxClient = channel.client;
        channel.send('Shutdown...').then((msg) => { auxClient.destroy(); msg.delete(15000); });
    }
}
exports.offBOT = offBOT;
function resetBOT(author, channel) {
    if (author.roles.has('517168972483919929') && channel.id === '611502712571559950') {
        const auxClient = channel.client;
        channel.send('Reset...').then((msg) => { auxClient.destroy(); msg.delete(15000); }).then(() => auxClient.login(config_1.config.token));
    }
}
exports.resetBOT = resetBOT;
function BOTstate(client) {
    const fbDB = firebase.database().ref('/bot');
    fbDB.once('value', snapshot => {
        console.log(snapshot.val().state);
        let state_ = new String;
        switch (snapshot.val().state) {
            case '0': {
                state_ = { status: 'dnd', game: { name: 'MODO DESARROLLO' } };
                break;
            }
            case '1': {
                state_ = { status: 'online', game: { name: 'kmpf help para ayuda' } };
                break;
            }
        }
        client.user.setPresence(state_);
    });
}
exports.BOTstate = BOTstate;
function changeSTATE(author, msg) {
    const fbDB = firebase.database().ref('/bot');
    const STATE_ = (msg.content.split(' '))[2];
    console.log(STATE_);
    if ((author.roles.has('517168972483919929') || author.roles.has('613554375062847501')) && msg.channel.id === '611502712571559950') {
        fbDB.set({ state: STATE_ });
        BOTstate(msg.channel.client);
    }
}
exports.changeSTATE = changeSTATE;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9kZXZzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEscUNBQWtDO0FBQ2xDLHlDQUF5QztBQUN6Qyw2QkFBMkI7QUFJM0IsU0FBZ0IsTUFBTSxDQUFDLE1BQVcsRUFBRSxPQUFZO0lBQzVDLElBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsSUFBSSxPQUFPLENBQUMsRUFBRSxLQUFLLG9CQUFvQixFQUFFO1FBQzlFLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7UUFDakMsT0FBTyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFRLEVBQUUsRUFBRSxHQUFHLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUMvRjtBQUNMLENBQUM7QUFMRCx3QkFLQztBQUNELFNBQWdCLFFBQVEsQ0FBQyxNQUFXLEVBQUUsT0FBWTtJQUM5QyxJQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLElBQUksT0FBTyxDQUFDLEVBQUUsS0FBSyxvQkFBb0IsRUFBRTtRQUM5RSxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQ2pDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBUSxFQUFFLEVBQUUsR0FBRyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsZUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7S0FDdEk7QUFDTCxDQUFDO0FBTEQsNEJBS0M7QUFFRCxTQUFnQixRQUFRLENBQUMsTUFBc0I7SUFDM0MsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsRUFBRTtRQUMxQixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsQyxJQUFJLE1BQU0sR0FBUSxJQUFJLE1BQU0sQ0FBQztRQUM3QixRQUFPLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLEVBQUM7WUFDeEIsS0FBSyxHQUFHLENBQUMsQ0FBQztnQkFBRSxNQUFNLEdBQUcsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFLLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxpQkFBaUIsRUFBRSxFQUFFLENBQUM7Z0JBQU0sTUFBTTthQUFFO1lBQzNGLEtBQUssR0FBRyxDQUFDLENBQUM7Z0JBQUUsTUFBTSxHQUFHLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsc0JBQXNCLEVBQUUsRUFBRSxDQUFDO2dCQUFDLE1BQU07YUFBRTtTQUM5RjtRQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RDLENBQUMsQ0FBQyxDQUFBO0FBQ04sQ0FBQztBQVZELDRCQVVDO0FBQ0QsU0FBZ0IsV0FBVyxDQUFDLE1BQVcsRUFBRSxHQUFRO0lBQzdDLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0MsTUFBTSxNQUFNLEdBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ25ELE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEIsSUFBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxLQUFLLG9CQUFvQixFQUFFO1FBQzlILElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUM1QixRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUNoQztBQUNMLENBQUM7QUFSRCxrQ0FRQyJ9